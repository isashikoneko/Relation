<!--
  Generated template for the ProfilePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-buttons start>
      <button ion-button menuToggle ion-only>
          <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>

    <ion-buttons end>
      <button ion-button ion-only>
          <ion-icon name="notifications"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>


<ion-content padding>

  <ion-item>

    <ion-avatar item-start>
      <img src="{{ user.profile_photo }}">
    </ion-avatar>

    <h2>{{ user.name }}</h2>
    <p>{{user.grade}}</p>

    <div item-end>

      <ion-icon (click)="openPopover($event)" name="more"></ion-icon>  

    </div>

  </ion-item>

  <ion-segment [(ngModel)]="state">
    <ion-segment-button value="en-cours" (ionSelect)="getEnCours()">
      En cours
    </ion-segment-button>
    <ion-segment-button value="valide" (ionSelect)="getValide()">
      Valide
    </ion-segment-button>
    <ion-segment-button value="annule" (ionSelect)="getAnnule()">
      Annule
    </ion-segment-button>
  </ion-segment>

  <div [ngSwitch]="state" >

    <ion-list *ngSwitchCase="'en-cours'">
      <ion-card *ngFor="let item of annonce; let i = index">

        <ion-item>
    
          <ion-avatar item-start>
            <img src="{{item.profile_photo}}">
          </ion-avatar>
    
          <h2>{{ item.name }}</h2>
          <p>{{item.grade}}</p>
    
          <div item-end>
    
            <ion-icon name = "checkmark-circle" (click)="validate(i)"></ion-icon>
            <ion-icon name = "close" (click)="annulate(i)"></ion-icon>
    
          </div>
    
        </ion-item>
    
        <ion-card-content> 
          <ion-card-title>
            Montant de la prime: {{ item.prime }}
          </ion-card-title>
    
          <p style="overflow: hidden;"> 
            {{ item.description }}
          </p>
          <a href="javascript:void(0)" (click)="detail(i)" >Voir plus</a>
    
        </ion-card-content>
    
        <ion-item *ngFor="let i of item.photo">
          <img src="{{i}}">
        </ion-item>
    
      </ion-card>
    </ion-list>

    <ion-list *ngSwitchCase="'valide'">
      <ion-card *ngFor="let item of annonce; let i = index">

        <ion-item>
    
          <ion-avatar item-start>
            <img src="{{ item.profile_photo }}">
          </ion-avatar>
    
          <h2>{{ item.name }}</h2>
          <p>Grade</p>
    
          <div item-end>
    
            <ion-icon name = "archive" (click)="archivate(i)"></ion-icon>
    
          </div>
    
        </ion-item>
    
        <ion-card-content> 
          <ion-card-title>
            Montant de la prime: {{ item.prime }}
          </ion-card-title>
    
          <p style="overflow: hidden;"> 
            {{ item.description }}
          </p>
          <a href="javascript:void(0)" (click)="detail(i)" >Voir plus</a>
    
        </ion-card-content>
    
        <ion-item *ngFor="let i of item.photo">
          <img src="{{i}}">
        </ion-item>
    
      </ion-card>
    </ion-list>

    <ion-list *ngSwitchCase="'annule'">

      <ion-card *ngFor="let item of annonce; let i = index">

        <ion-item>
    
          <ion-avatar item-start>
            <img src="{{ item.profile_photo }}">
          </ion-avatar>
    
          <h2>{{ item.name }}</h2>
          <p>Grade</p>
    
          <div item-end>
    
            <ion-icon name = "trash" (click)="delete(i)"></ion-icon>
    
          </div>
    
        </ion-item>
    
        <ion-card-content> 
          <ion-card-title>
            Montant de la prime: {{ item.prime }}
          </ion-card-title>
    
          <p style="overflow: hidden;"> 
            {{ item.description }}
          </p>
          <a href="javascript:void(0)" (click)="detail(i)" >Voir plus</a>
    
        </ion-card-content>
    
        <ion-item *ngFor="let i of item.photo">
          <img src="{{i}}">
        </ion-item>
    
      </ion-card>

    </ion-list>

  </div>

</ion-content>
